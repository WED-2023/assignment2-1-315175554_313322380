(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[978],{4978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container py-5"},[t("h1",{staticClass:"title text-center mb-4"},[e._v("Search Recipes")]),t("b-form",{staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.searchRecipes.apply(null,arguments)}}},[t("div",{staticClass:"d-flex justify-content-center mb-3"},[t("b-form-input",{staticClass:"mr-2",staticStyle:{width:"300px"},attrs:{placeholder:"Search for a recipe...",list:"autocomplete-options"},on:{input:e.fetchAutocompleteSuggestions},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),t("datalist",{attrs:{id:"autocomplete-options"}},e._l(e.suggestions,(function(r){return t("option",{key:r},[e._v(e._s(r))])})),0),t("b-button",{attrs:{disabled:e.loading,type:"submit",variant:"primary"}},[e.loading?t("span",[t("b-spinner",{attrs:{small:""}}),e._v(" Searching... ")],1):t("span",[e._v("Search")])])],1),t("div",{staticClass:"filters d-flex justify-content-center mb-4"},[t("b-dropdown",{staticClass:"mr-2",attrs:{id:"cuisine-dropdown",text:"Cuisine",variant:"secondary"}},e._l(e.cuisines,(function(r){return t("b-dropdown-item",{key:r,on:{click:function(t){e.selectedCuisine=r}}},[e._v(e._s(r))])})),1),t("b-dropdown",{staticClass:"mr-2",attrs:{id:"diet-dropdown",text:"Diet",variant:"secondary"}},e._l(e.diets,(function(r){return t("b-dropdown-item",{key:r,on:{click:function(t){e.selectedDiet=r}}},[e._v(e._s(r))])})),1),t("b-dropdown",{staticClass:"mr-2",attrs:{id:"intolerance-dropdown",text:"Intolerance",variant:"secondary"}},e._l(e.intolerances,(function(r){return t("b-dropdown-item",{key:r,on:{click:function(t){e.selectedIntolerance=r}}},[e._v(e._s(r))])})),1),t("b-form-select",{staticClass:"mr-2",attrs:{options:e.resultsOptions,size:"sm"},model:{value:e.numberOfResults,callback:function(t){e.numberOfResults=t},expression:"numberOfResults"}}),t("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:e.resetFilters}},[e._v("Clear Filters")])],1)]),e.loading?t("div",{staticClass:"loading-message text-center my-4"},[t("b-spinner",{attrs:{small:"",label:"Searching..."}}),t("span",{staticClass:"ml-2"},[e._v("Searching...")])],1):e._e(),e.error?t("b-alert",{attrs:{variant:"danger",dismissible:""}},[e._v(" "+e._s(e.error)+" ")]):e._e(),!e.loading&&e.recipes.length>0?t("RecipePreviewList",{attrs:{title:"Search Results",recipes:e.recipes}}):e._e(),!e.loading&&0===e.recipes.length&&e.query?t("div",{staticClass:"no-results text-center mt-4"},[e._v(' No recipes found for "'+e._s(e.query)+'". ')]):e._e()],1)},s=[],i=r(459),a=r(388),c=(r(3270),r(959),r(7899),r(3767)),o=r(4335);const l={components:{RecipePreviewList:c.A},data:function(){return{query:"",recipes:[],loading:!1,error:null,suggestions:[],selectedCuisine:null,selectedDiet:null,selectedIntolerance:null,numberOfResults:5,resultsOptions:[5,10,15],cuisines:["Italian","Chinese","American"],diets:["Vegetarian","Vegan","Keto"],intolerances:["Gluten","Dairy","Peanut"]}},methods:{searchRecipes:function(){var e=this;return(0,a.A)((0,i.A)().mark((function t(){var r;return(0,i.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.query){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.error=null,t.prev=4,t.next=7,o.A.get(e.$root.store.server_domain+"/recipes/search",{params:{recipeName:e.query,cuisine:e.selectedCuisine,diet:e.selectedDiet,intolerance:e.selectedIntolerance,number:e.numberOfResults}});case 7:r=t.sent,e.recipes=r.data,localStorage.setItem("lastSearch",JSON.stringify(e.recipes)),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),console.error("Error searching recipes:",t.t0),e.error="Error fetching search results.";case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,12,16,19]])})))()},fetchAutocompleteSuggestions:function(){var e=this;return(0,a.A)((0,i.A)().mark((function t(){var r;return(0,i.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.query.length<3)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.A.get(e.$root.store.server_domain+"/recipes/autocomplete",{params:{query:e.query}});case 5:r=t.sent,e.suggestions=r.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error("Error fetching suggestions:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},resetFilters:function(){this.selectedCuisine=null,this.selectedDiet=null,this.selectedIntolerance=null}},mounted:function(){var e=localStorage.getItem("lastSearch");e&&(this.recipes=JSON.parse(e))}},u=l;var d=r(1656),p=(0,d.A)(u,n,s,!1,null,"1646fd51",null);const f=p.exports},3270:(e,t,r)=>{"use strict";var n=r(1605),s=r(2074),i=r(2612),a=r(874),c=s((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));n({target:"Date",proto:!0,arity:1,forced:c},{toJSON:function(e){var t=i(this),r=a(t,"number");return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},7899:(e,t,r)=>{var n=r(1605),s=r(2612),i=r(1641),a=r(2074),c=a((function(){i(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return i(s(e))}})}}]);
//# sourceMappingURL=978.8708bf03.js.map