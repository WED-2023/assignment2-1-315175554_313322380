"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[670],{1249:(e,t,s)=>{var n=s(2109),r=s(2092).map,i=s(1194),a=i("map");n({target:"Array",proto:!0,forced:!a},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},4670:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container py-5"},[t("h1",{staticClass:"title text-center mb-4"},[e._v("Search Recipes")]),t("b-form",{staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.searchRecipes.apply(null,arguments)}}},[t("div",{staticClass:"d-flex justify-content-center mb-3"},[t("b-form-input",{staticClass:"mr-2 search-input",staticStyle:{width:"300px"},attrs:{placeholder:"Search for a recipe...",list:"autocomplete-options"},on:{input:e.fetchAutocompleteSuggestions},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),t("datalist",{attrs:{id:"autocomplete-options"}},e._l(e.suggestions,(function(s){return t("option",{key:s},[e._v(e._s(s))])})),0),t("b-button",{attrs:{disabled:e.loading||!e.query,type:"submit",variant:"primary"}},[e.loading?t("span",[t("b-spinner",{attrs:{small:""}}),e._v(" Searching... ")],1):t("span",[e._v("Search")])])],1),t("div",{staticClass:"filters d-flex justify-content-center mb-4"},[t("b-dropdown",{staticClass:"mr-2",attrs:{id:"cuisine-dropdown",text:e.selectedCuisine||"Cuisine",variant:"secondary"}},e._l(e.cuisines,(function(s){return t("b-dropdown-item",{key:s,on:{click:function(t){e.selectedCuisine=s}}},[e._v(e._s(s))])})),1),t("b-dropdown",{staticClass:"mr-2",attrs:{id:"diet-dropdown",text:e.selectedDiet||"Diet",variant:"secondary"}},e._l(e.diets,(function(s){return t("b-dropdown-item",{key:s,on:{click:function(t){e.selectedDiet=s}}},[e._v(e._s(s))])})),1),t("b-dropdown",{staticClass:"mr-2",attrs:{id:"intolerance-dropdown",text:e.selectedIntolerance||"Intolerance",variant:"secondary"}},e._l(e.intolerances,(function(s){return t("b-dropdown-item",{key:s,on:{click:function(t){e.selectedIntolerance=s}}},[e._v(e._s(s))])})),1),t("b-form-select",{staticClass:"mr-2",attrs:{options:e.resultsOptions,size:"sm"},model:{value:e.numberOfResults,callback:function(t){e.numberOfResults=t},expression:"numberOfResults"}}),t("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:e.resetFilters}},[e._v("Clear Filters")])],1)]),e.selectedCuisine||e.selectedDiet||e.selectedIntolerance?t("div",{staticClass:"filter-summary text-center mb-4"},[t("p",[e._v("Showing results with "),e.selectedCuisine?t("strong",[e._v("Cuisine: "+e._s(e.selectedCuisine))]):e._e(),e.selectedDiet?t("strong",[e._v(", Diet: "+e._s(e.selectedDiet))]):e._e(),e.selectedIntolerance?t("strong",[e._v(", Intolerance: "+e._s(e.selectedIntolerance))]):e._e(),e._v(". ")])]):e._e(),e.loading?t("div",{staticClass:"loading-message text-center my-4"},[t("b-spinner",{attrs:{small:"",label:"Searching..."}}),t("span",{staticClass:"ml-2"},[e._v("Searching...")])],1):e._e(),e.error?t("b-alert",{attrs:{variant:"danger",dismissible:""}},[e._v(" "+e._s(e.error)+" ")]):e._e(),!e.loading&&e.recipes.length>0?t("div",{staticClass:"result-info text-center"},[t("p",[e._v(e._s(e.recipes.length)+' results found for "'+e._s(e.query)+'".')]),t("RecipePreviewList",{attrs:{recipes:e.recipes}})],1):e._e(),!e.loading&&0===e.recipes.length&&e.query?t("div",{staticClass:"no-results text-center mt-4"},[e._v(' No recipes found for "'+e._s(e.query)+'". ')]):e._e()],1)},r=[],i=s(6835),a=s(8534),c=(s(1249),s(7718)),l=s(9669),o=s.n(l);const u={components:{RecipePreviewList:c.Z},data:function(){return{query:"",recipes:[],loading:!1,error:null,suggestions:[],selectedCuisine:null,selectedDiet:null,selectedIntolerance:null,numberOfResults:5,resultsOptions:[5,10,15],cuisines:["Italian","Chinese","American"],diets:["Vegetarian","Vegan","Keto"],intolerances:["Gluten","Dairy","Peanut"]}},methods:{searchRecipes:function(){var e=this;return(0,a.Z)((0,i.Z)().mark((function t(){var s;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.query){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.error=null,e.recipes=[],t.prev=5,console.log("Sending API request with the following params:",{titleMatch:e.query,cuisine:e.selectedCuisine,diet:e.selectedDiet,intolerance:e.selectedIntolerance,number:e.numberOfResults}),t.next=9,o().get("http://localhost:3000/recipes/search",{params:{titleMatch:e.query,cuisine:e.selectedCuisine,diet:e.selectedDiet,intolerance:e.selectedIntolerance,number:e.numberOfResults}});case 9:s=t.sent,console.log("API response received:",s.data),e.recipes=s.data.map((function(e){return{id:e.id,name:e.title}})),0===e.recipes.length&&(e.error='No recipes found for "'.concat(e.query,'".')),e.query="",t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](5),console.error("Error searching recipes:",t.t0.response?t.t0.response.data:t.t0.message),e.error="Error fetching search results. Please check the network or server logs.";case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[5,16,20,23]])})))()}}},d=u;var p=s(1001),m=(0,p.Z)(d,n,r,!1,null,"c45356b6",null);const f=m.exports}}]);
//# sourceMappingURL=670.023fc2f3.js.map